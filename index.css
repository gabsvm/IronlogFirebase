
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light dark;
  
  /* DEFAULT THEME: IRON (Red) */
  --primary-50: 254 242 242;
  --primary-100: 254 226 226;
  --primary-200: 254 202 202;
  --primary-300: 252 165 165;
  --primary-400: 248 113 113;
  --primary-500: 239 68 68;
  --primary-600: 220 38 38; /* Main Brand Color */
  --primary-700: 185 28 28;
  --primary-800: 153 27 27;
  --primary-900: 127 29 29;
}

/* THEME: OCEAN (Blue) */
[data-theme="ocean"] {
  --primary-50: 239 246 255;
  --primary-100: 219 234 254;
  --primary-200: 191 219 254;
  --primary-300: 147 197 253;
  --primary-400: 96 165 250;
  --primary-500: 59 130 246;
  --primary-600: 37 99 235;
  --primary-700: 29 78 216;
  --primary-800: 30 64 175;
  --primary-900: 30 58 138;
}

/* THEME: FOREST (Emerald) */
[data-theme="forest"] {
  --primary-50: 236 253 245;
  --primary-100: 209 250 229;
  --primary-200: 167 243 208;
  --primary-300: 110 231 183;
  --primary-400: 52 211 153;
  --primary-500: 16 185 129;
  --primary-600: 5 150 105;
  --primary-700: 4 120 87;
  --primary-800: 6 95 70;
  --primary-900: 6 78 59;
}

/* THEME: ROYAL (Purple) */
[data-theme="royal"] {
  --primary-50: 250 245 255;
  --primary-100: 243 232 255;
  --primary-200: 233 213 255;
  --primary-300: 216 180 254;
  --primary-400: 192 132 252;
  --primary-500: 168 85 247;
  --primary-600: 147 51 234;
  --primary-700: 126 34 206;
  --primary-800: 107 33 168;
  --primary-900: 88 28 135;
}

/* THEME: SUNSET (Orange) */
[data-theme="sunset"] {
  --primary-50: 255 247 237;
  --primary-100: 255 237 213;
  --primary-200: 254 215 170;
  --primary-300: 253 186 116;
  --primary-400: 251 146 60;
  --primary-500: 249 115 22;
  --primary-600: 234 88 12;
  --primary-700: 194 65 12;
  --primary-800: 154 52 18;
  --primary-900: 124 45 18;
}

/* THEME: MONOCHROME (Zinc/System) */
[data-theme="monochrome"] {
  --primary-50: 250 250 250;
  --primary-100: 244 244 245;
  --primary-200: 228 228 231;
  --primary-300: 212 212 216;
  --primary-400: 161 161 170;
  --primary-500: 113 113 122;
  --primary-600: 82 82 91;
  --primary-700: 63 63 70;
  --primary-800: 39 39 42;
  --primary-900: 24 24 27;
}

html, body, #root {
  height: 100%;
  height: 100dvh; /* Dynamic viewport height for mobile browsers */
  margin: 0;
  padding: 0;
  overflow: hidden; /* Prevent body scroll, handle inside Layout */
  /* Disable text selection for app-like feel */
  user-select: none; 
  -webkit-user-select: none;
}

body {
  @apply bg-gray-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100;
  overscroll-behavior: none;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  -webkit-font-smoothing: antialiased;
  -webkit-tap-highlight-color: transparent;
}

/* Custom Scrollbar */
.scroll-container::-webkit-scrollbar {
    width: 0px; /* Hidden for cleaner mobile look */
    background: transparent;
}

/* Safe Area Utilities for Native */
.pt-safe {
    padding-top: env(safe-area-inset-top, 20px);
}

.pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 20px);
}

/* Input cleanup */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Allow text selection only on inputs */
input, textarea {
  user-select: text;
  -webkit-user-select: text;
}

/* Animations */
@keyframes slideUp {
    from { transform: translateY(100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
.animate-slideUp {
    animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    will-change: transform, opacity; /* Hint for compositor */
}

@keyframes pulse-subtle {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}
.animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
}

/* --- VIEW TRANSITIONS API CONFIGURATION --- */

/* Give the navbar a stable identity so it doesn't animate out */
.nav-bar {
    view-transition-name: main-navbar;
}

/* ANIMATION KEYFRAMES */
@keyframes slide-from-right {
    from { transform: translateX(100%); }
}
@keyframes slide-to-left {
    to { transform: translateX(-30%); opacity: 0; }
}
@keyframes slide-from-left {
    from { transform: translateX(-30%); opacity: 0; }
}
@keyframes slide-to-right {
    to { transform: translateX(100%); z-index: 100; }
}
@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes fade-out { from { opacity: 1; } to { opacity: 0; } }

/* DEFAULT / FADE (Sibling Tabs) */
::view-transition-old(root) {
    animation: 200ms cubic-bezier(0.4, 0, 0.2, 1) both fade-out;
}
::view-transition-new(root) {
    animation: 200ms cubic-bezier(0.4, 0, 0.2, 1) both fade-in;
}

/* FORWARD NAVIGATION (Entering Deeper View) */
:root[data-transition="forward"]::view-transition-old(root) {
    animation: 300ms cubic-bezier(0.3, 0, 0, 1) both slide-to-left;
}
:root[data-transition="forward"]::view-transition-new(root) {
    animation: 300ms cubic-bezier(0.3, 0, 0, 1) both slide-from-right;
    box-shadow: -20px 0 50px rgba(0,0,0,0.3); /* Shadow for depth */
}

/* BACK NAVIGATION (Returning) */
:root[data-transition="back"]::view-transition-old(root) {
    animation: 300ms cubic-bezier(0.3, 0, 0, 1) both slide-to-right;
    z-index: 100; /* Keep old view on top as it slides away */
    box-shadow: -20px 0 50px rgba(0,0,0,0.3);
}
:root[data-transition="back"]::view-transition-new(root) {
    animation: 300ms cubic-bezier(0.3, 0, 0, 1) both slide-from-left;
}

/* Utilities */
@layer utilities {
    .glass {
        @apply bg-white/80 dark:bg-zinc-900/80 backdrop-blur-md border-b border-zinc-200 dark:border-white/5;
    }
    .card-gradient {
        @apply bg-gradient-to-br from-white to-zinc-50 dark:from-zinc-900 dark:to-zinc-900/50;
    }
    .bg-grid-pattern {
        background-size: 40px 40px;
        background-image: 
            linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);
    }
    .light .bg-grid-pattern {
        background-image: 
            linear-gradient(to right, rgba(0,0,0,0.03) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(0,0,0,0.03) 1px, transparent 1px);
    }
}
